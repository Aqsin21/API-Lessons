﻿
<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title></title>
</head>
<body>
    <input name="username" placeholder="username" />
    <br />
    <input name="password" placeholder="password" />
    <button onclick="login()">Login</button>
    <button onclick="getGroups()">Get groups</button>
</body>
</html>

<script>
    function login() {

        const dataToSend = {
            username: document.getElementsByName('username')[0].value,
            password: document.getElementsByName('password')[0].value,
        };

        fetch("https://localhost:7298/api/Auth", {
            method: "POST", // Specify the HTTP method as POST
            headers: {
                "Content-Type": "application/json" // Indicate that the body is JSON
            },
            body: JSON.stringify(dataToSend) // Convert the JavaScript object to a JSON string
        })
            .then(response => {
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                return response.json(); // Parse the JSON response from the server
            })
            .then(data => {
                console.log("Success:", data);
                localStorage.setItem('token',data.token)// Handle the successful response data
            })
            .catch(error => {
                console.error("Error:", error); // Handle any errors during the request
            });
    }


    function getGroups() {
        // Assume you have obtained the JWT from a login or registration process
        const jwtToken = localStorage.getItem('token');

        // Define the URL of the protected resource
        const apiUrl = 'https://localhost:7298/api/Students';

        // Create the request options, including the Authorization header
        const requestOptions = {
            method: 'GET', // Or 'POST', 'PUT', 'DELETE' depending on your request
            headers: {
                'Content-Type': 'application/json',
                'Authorization': `Bearer ${jwtToken}` // Include the JWT as a Bearer token
            }
        };

        // Send the request using fetch
        fetch(apiUrl, requestOptions)
            .then(response => {
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                return response.json(); // Or response.text() if the response is not JSON
            })
            .then(data => {
                console.log('Success:', data);
            })
            .catch(error => {
                console.error('Error:', error);
            });
    }
</script>﻿
<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title></title>
</head>
<body>
    <input name="username" placeholder="username" />
    <br />
    <input name="password" placeholder="password" />
    <button onclick="login()">Login</button>
  
</body>
</html>

<script>
    function login() {

        const dataToSend = {
            username: document.getElementsByName('username')[0].value,
            password: document.getElementsByName('password')[0].value,
        };

        fetch("https://localhost:7298/api/Auth", {
            method: "POST", // Specify the HTTP method as POST
            headers: {
                "Content-Type": "application/json" // Indicate that the body is JSON
            },
            body: JSON.stringify(dataToSend) // Convert the JavaScript object to a JSON string
        })
            .then(response => {
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                return response.json(); // Parse the JSON response from the server
            })
            .then(data => {
                console.log("Success:", data);
                localStorage.setItem('token',data.token)// Handle the successful response data
            })
            .catch(error => {
                console.error("Error:", error); // Handle any errors during the request
            });
    }


    function getGroups() {
        // Assume you have obtained the JWT from a login or registration process
        const jwtToken = localStorage.getItem('token');

        // Define the URL of the protected resource
        const apiUrl = 'https://localhost:7298/api/Students';

        // Create the request options, including the Authorization header
        const requestOptions = {
            method: 'GET', // Or 'POST', 'PUT', 'DELETE' depending on your request
            headers: {
                'Content-Type': 'application/json',
                'Authorization': `Bearer ${jwtToken}` // Include the JWT as a Bearer token
            }
        };

        // Send the request using fetch
        fetch(apiUrl, requestOptions)
            .then(response => {
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                return response.json(); // Or response.text() if the response is not JSON
            })
            .then(data => {
                console.log('Success:', data);
            })
            .catch(error => {
                console.error('Error:', error);
            });
    }
</script>